{"version":3,"file":"index.js","sources":["../src/http-adapter.ts","../src/api-client.ts","../src/base-api-service.ts","../src/core-api-service.ts","../src/user-api-service.ts","../src/ads-api-service.ts","../src/index.ts"],"sourcesContent":["// This class only pretends to make http calls. Instead it just prints to the console.\n\nexport class HttpAdapter {\n  get(url: string) {\n    console.log(`GET ${url}`);\n    return Promise.resolve(true);\n  }\n  post(url: string, params: any) {\n    console.log(`POST ${url}`);\n    console.log(`  params: ${params}`);\n    return Promise.resolve(true);\n  }\n  put(url: string, params: any) {\n    console.log(`PUT ${url}`);\n    console.log(`  params: ${params}`);\n    return Promise.resolve(true);\n  }\n  delete(url: string) {\n    console.log(`DELETE ${url}`);\n    return Promise.resolve(true);\n  }\n}\n","import { HttpAdapter } from './http-adapter';\nimport { APIClientConfig } from './api-client-config';\n\nexport class APIClient {\n    public config: APIClientConfig;\n    public httpAdapter: HttpAdapter;\n    public accessToken: string;\n    constructor() {\n        this.httpAdapter = new HttpAdapter();\n    }\n\n    public setConfig(newConfig: APIClientConfig) {\n        this.config = newConfig;\n    }\n\n    public create(config: APIClientConfig): APIClient {\n        const newInstance = createAPIClient();\n        newInstance.setConfig(config);\n        return newInstance;\n    }\n\n    public checkCompatibility() {\n        // TODO implement this\n    }\n\n    public login(credentials) {\n    }\n}\n\nexport function createAPIClient() {\n    return new APIClient();\n}\n\nexport function addService(key: string, createServiceFn: Function): void {\n    const serviceInstance = createServiceFn();\n    Object.defineProperty(APIClient.prototype, key, {\n        get: function () {\n            const currClient = this;\n            // Create a new object from the service whose client prop points to the client\n            const newService = Object.create(serviceInstance);\n            newService.client = currClient;\n\n            // Attach the new service directly to the client object so that the service doesn't get created again.\n            Object.defineProperty(currClient, key, {\n                get: function () {\n                    return newService;\n                }\n            });\n\n            return newService;\n        }\n    });\n}\n","import { APIClient } from './api-client';\n\nexport class BaseAPIService {\n  public client: APIClient;\n}\n","import { BaseAPIService } from './base-api-service';\n\nexport class CoreAPIService extends BaseAPIService {\n\n  get apiVersion() {\n    return '1.0.0';\n  }\n  get baseUrl() {\n    return this.client.config.apiUrls.core;\n  }\n  get httpAdapter() {\n    return this.client.httpAdapter;\n  }\n\n  public getStatus() {\n    return this.httpAdapter.get(`${this.baseUrl}/status`);\n  }\n  public login(credentials) {\n    return this.httpAdapter.post(`${this.baseUrl}/login`, credentials);\n  }\n}\n","import { BaseAPIService } from './base-api-service';\n\nexport class UserAPIService extends BaseAPIService {\n\n  get apiVersion() {\n    return '1.0.1';\n  }\n  get baseUrl() {\n    return this.client.config.apiUrls.user;\n  }\n  get httpAdapter() {\n    return this.client.httpAdapter;\n  }\n\n  public getStatus() {\n    return this.httpAdapter.get(`${this.baseUrl}/status`);\n  }\n  public getUsers() {\n    return this.httpAdapter.get(`${this.baseUrl}/users`);\n  }\n  public getUser(userId: string) {\n    return this.httpAdapter.get(`${this.baseUrl}/users/${userId}`);\n  }\n  public putUser(userId: string, params) {\n    return this.httpAdapter.put(`${this.baseUrl}/users/${userId}`, params);\n  }\n  public getUserFriends(userId: string) {\n    return this.httpAdapter.get(`${this.baseUrl}/users/${userId}/friends`);\n  }\n  public deleteUserFriend(userId: string, friendId: string) {\n    return this.httpAdapter.delete(`${this.baseUrl}/users/${userId}/friends/${friendId}`);\n  }\n  public postUserFriend(userId: string, params) {\n    return this.httpAdapter.post(`${this.baseUrl}/users/${userId}/friends`, params);\n  }\n}\n","import { BaseAPIService } from './base-api-service';\n\nexport class AdsAPIService extends BaseAPIService {\n\n  get apiVersion() {\n    return '1.2.0';\n  }\n  get baseUrl() {\n    return this.client.config.apiUrls.ads;\n  }\n  get httpAdapter() {\n    return this.client.httpAdapter;\n  }\n\n  public getStatus() {\n    return this.httpAdapter.get(`${this.baseUrl}/status`);\n  }\n  public getAds() {\n    return this.httpAdapter.get(`${this.baseUrl}/ads`);\n  }\n  public getAd(adId: string) {\n    return this.httpAdapter.get(`${this.baseUrl}/ads/${adId}`);\n  }\n  public postAd(adId: string, params) {\n    return this.httpAdapter.post(`${this.baseUrl}/ads/${adId}`, params);\n  }\n  public putAd(adId: string, params) {\n    return this.httpAdapter.put(`${this.baseUrl}/ads/${adId}`, params);\n  }\n  public deleteAd(adId: string, params) {\n    return this.httpAdapter.delete(`${this.baseUrl}/ads/${adId}`);\n  }\n  public publishAd(adId: string) {\n    return this.httpAdapter.post(`${this.baseUrl}/ads/${adId}/publish`, null);\n  }\n  public getAdViewers(adId: string) {\n    return this.httpAdapter.get(`${this.baseUrl}/ads/${adId}/viewers`);\n  }\n}\n","import { createAPIClient, addService } from './api-client';\nimport { CoreAPIService } from './core-api-service';\nimport { UserAPIService } from './user-api-service';\nimport { AdsAPIService } from './ads-api-service';\n\nexport const client = createAPIClient();\n\naddService('core', () => {\n    return new CoreAPIService();\n});\n\naddService('ads', () => {\n    return new AdsAPIService();\n});\n\naddService('user', () => {\n    return new UserAPIService();\n});\n"],"names":["tslib_1.__extends"],"mappings":"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"}