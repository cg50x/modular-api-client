{"version":3,"file":"index.min.js","sources":["../src/api-client.ts","../src/http-adapter.ts","../src/base-api-service.ts","../src/core-api-service.ts","../src/user-api-service.ts","../src/ads-api-service.ts","../src/index.ts"],"sourcesContent":["import { HttpAdapter } from './http-adapter';\nimport { APIClientConfig } from './api-client-config';\n\nexport class APIClient {\n    public config: APIClientConfig;\n    public httpAdapter: HttpAdapter;\n    public accessToken: string;\n    constructor() {\n        this.httpAdapter = new HttpAdapter();\n    }\n\n    public setConfig(newConfig: APIClientConfig) {\n        this.config = newConfig;\n    }\n\n    public create(config: APIClientConfig): APIClient {\n        const newInstance = createAPIClient();\n        newInstance.setConfig(config);\n        return newInstance;\n    }\n\n    public checkCompatibility() {\n        // TODO implement this\n    }\n\n    public login(credentials) {\n    }\n}\n\nexport function createAPIClient() {\n    return new APIClient();\n}\n\nexport function addService(key: string, createServiceFn: Function): void {\n    const serviceInstance = createServiceFn();\n    Object.defineProperty(APIClient.prototype, key, {\n        get: function () {\n            const currClient = this;\n            // Create a new object from the service whose client prop points to the client\n            const newService = Object.create(serviceInstance);\n            newService.client = currClient;\n\n            // Attach the new service directly to the client object so that the service doesn't get created again.\n            Object.defineProperty(currClient, key, {\n                get: function () {\n                    return newService;\n                }\n            });\n\n            return newService;\n        }\n    });\n}\n","// This class only pretends to make http calls. Instead it just prints to the console.\n\nexport class HttpAdapter {\n  get(url: string) {\n    console.log(`GET ${url}`);\n    return Promise.resolve(true);\n  }\n  post(url: string, params: any) {\n    console.log(`POST ${url}`);\n    console.log(`  params: ${params}`);\n    return Promise.resolve(true);\n  }\n  put(url: string, params: any) {\n    console.log(`PUT ${url}`);\n    console.log(`  params: ${params}`);\n    return Promise.resolve(true);\n  }\n  delete(url: string) {\n    console.log(`DELETE ${url}`);\n    return Promise.resolve(true);\n  }\n}\n","import { APIClient } from './api-client';\n\nexport class BaseAPIService {\n  public client: APIClient;\n}\n","import { BaseAPIService } from './base-api-service';\n\nexport class CoreAPIService extends BaseAPIService {\n\n  get apiVersion() {\n    return '1.0.0';\n  }\n  get baseUrl() {\n    return this.client.config.apiUrls.core;\n  }\n  get httpAdapter() {\n    return this.client.httpAdapter;\n  }\n\n  public getStatus() {\n    return this.httpAdapter.get(`${this.baseUrl}/status`);\n  }\n  public login(credentials) {\n    return this.httpAdapter.post(`${this.baseUrl}/login`, credentials);\n  }\n}\n","import { BaseAPIService } from './base-api-service';\n\nexport class UserAPIService extends BaseAPIService {\n\n  get apiVersion() {\n    return '1.0.1';\n  }\n  get baseUrl() {\n    return this.client.config.apiUrls.user;\n  }\n  get httpAdapter() {\n    return this.client.httpAdapter;\n  }\n\n  public getStatus() {\n    return this.httpAdapter.get(`${this.baseUrl}/status`);\n  }\n  public getUsers() {\n    return this.httpAdapter.get(`${this.baseUrl}/users`);\n  }\n  public getUser(userId: string) {\n    return this.httpAdapter.get(`${this.baseUrl}/users/${userId}`);\n  }\n  public putUser(userId: string, params) {\n    return this.httpAdapter.put(`${this.baseUrl}/users/${userId}`, params);\n  }\n  public getUserFriends(userId: string) {\n    return this.httpAdapter.get(`${this.baseUrl}/users/${userId}/friends`);\n  }\n  public deleteUserFriend(userId: string, friendId: string) {\n    return this.httpAdapter.delete(`${this.baseUrl}/users/${userId}/friends/${friendId}`);\n  }\n  public postUserFriend(userId: string, params) {\n    return this.httpAdapter.post(`${this.baseUrl}/users/${userId}/friends`, params);\n  }\n}\n","import { BaseAPIService } from './base-api-service';\n\nexport class AdsAPIService extends BaseAPIService {\n\n  get apiVersion() {\n    return '1.2.0';\n  }\n  get baseUrl() {\n    return this.client.config.apiUrls.ads;\n  }\n  get httpAdapter() {\n    return this.client.httpAdapter;\n  }\n\n  public getStatus() {\n    return this.httpAdapter.get(`${this.baseUrl}/status`);\n  }\n  public getAds() {\n    return this.httpAdapter.get(`${this.baseUrl}/ads`);\n  }\n  public getAd(adId: string) {\n    return this.httpAdapter.get(`${this.baseUrl}/ads/${adId}`);\n  }\n  public postAd(adId: string, params) {\n    return this.httpAdapter.post(`${this.baseUrl}/ads/${adId}`, params);\n  }\n  public putAd(adId: string, params) {\n    return this.httpAdapter.put(`${this.baseUrl}/ads/${adId}`, params);\n  }\n  public deleteAd(adId: string, params) {\n    return this.httpAdapter.delete(`${this.baseUrl}/ads/${adId}`);\n  }\n  public publishAd(adId: string) {\n    return this.httpAdapter.post(`${this.baseUrl}/ads/${adId}/publish`, null);\n  }\n  public getAdViewers(adId: string) {\n    return this.httpAdapter.get(`${this.baseUrl}/ads/${adId}/viewers`);\n  }\n}\n","import { createAPIClient, addService } from './api-client';\nimport { CoreAPIService } from './core-api-service';\nimport { UserAPIService } from './user-api-service';\nimport { AdsAPIService } from './ads-api-service';\n\nexport const client = createAPIClient();\n\naddService('core', () => {\n    return new CoreAPIService();\n});\n\naddService('ads', () => {\n    return new AdsAPIService();\n});\n\naddService('user', () => {\n    return new UserAPIService();\n});\n"],"names":["APIClient","key","createServiceFn","serviceInstance","Object","defineProperty","prototype","get","currClient","this","newService","create","client","HttpAdapter","url","console","log","Promise","resolve","params","httpAdapter","newConfig","config","newInstance","createAPIClient","setConfig","credentials","tslib_1.__extends","CoreAPIService","apiUrls","core","baseUrl","post","BaseAPIService","UserAPIService","user","userId","put","friendId","delete","AdsAPIService","ads","adId","addService"],"mappings":"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"}